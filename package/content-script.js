!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}({9:function(t,e){(()=>{Date.now();function t(t){n.DEBUG_CONSOLE&&$notify("log",{message:t})}function e(t,e){$notify("message",{message:t,duration:e})}if(window!==window.parent||function(){try{return window.self!==window.top}catch(t){return!0}}())return;$notify("titleDetermined",{title:document.title});const n={sites:[]};let i=null,o=null,r=null,a=null,l=null,s=!1,d=null;function c(t){let e=document.createElement("style");document.head.appendChild(e),e.textContent=t}function u(t){let e=document.createEvent("HTMLEvents");e.initEvent("click",!0,!1),t.dispatchEvent(e)}function p(t,n,i){const o={elm:{allow:["a","button:not([disabled])","details",'input:not([type="disabled" i]):not([type="_hidden" i]):not([type="readonly" i])',"select:not([disabled])","textarea:not([disabled]):not([readonly])",'[contenteditable=""]','[contenteditable="true" i]',"[onclick]","[onmousedown]","[onmouseup]",'[role="button" i]','[role="checkbox" i]','[role="link" i]','[role="menuitemcheckbox" i]','[role="menuitemradio" i]','[role="option" i]','[role="radio" i]','[role="switch" i]'],block:[]},hintCh:"asdfghjkl"},r=[...document.querySelectorAll(t||(o.elm.allow.join(",")||void 0))].filter(t=>null===t.closest(o.elm.block.join(",")||void 0)).map(t=>{const e=t.getBoundingClientRect();return{bottom:Math.floor(e.bottom),elm:t,height:Math.floor(e.height),left:Math.floor(e.left||e.x),right:Math.floor(e.right),top:Math.floor(e.top||e.y),width:Math.floor(e.width)}}).filter(t=>{const e=window.innerHeight,n=window.innerWidth;return t.width>0&&t.height>0&&t.bottom>0&&t.top<e&&t.right>0&&t.left<n});const a=function(t){const e=o.hintCh.toUpperCase(),n=e.length;var i={},r=0,a=!0;function l(t){var o=t.length;if(0===o)return e.charAt(0);var s=t.substr(0,o-1),d=e.indexOf(t.charAt(o-1))+1;if(d===n){var c=l(s);return a&&(delete i[c],r--),c+e.charAt(0)}return s+e.charAt(d)}for(var s="";r<t;)s=l(s),i[s]=!0,r++;var d=[];for(let t of Object.keys(i))d.push(t);return d}(r.length),l=r.map((t,e)=>(t.hintCh=a[e],t)).map(t=>{const e=document.createElement("div");return e.classList.add("keysnail-hint"),e.style.top=`${t.top}px`,e.style.left=`${t.left}px`,e.textContent=t.hintCh,document.body.appendChild(e),t.hintElm=e,t}),s=()=>{d=null,window.removeEventListener("keydown",p),l.forEach(t=>{t.hintElm&&t.hintElm.remove()}),n&&n()};let c="";const p=t=>{if(!t.metaKey&&!t.shiftKey){if("Control"===t.key||"Alt"===t.key)return;if(t.preventDefault(),"Escape"===t.key||"g"===t.key&&t.ctrlKey)s();else{c+=t.key.toUpperCase(),l.filter(t=>!t.hintCh.startsWith(c)).forEach(t=>{t.hintElm.remove()});const n=l.filter(t=>t.hintCh.startsWith(c));if(0===n.length)return void s();if(1===n.length&&n[0].hintCh===c){let t=n[0].elm;i?t.href?function(t,e){$notify("createNewTab",{url:t,openInBackground:e})}(t.href,!0):e("Element is clickable but no href found"):(t.focus(),u(t)),s()}}}};d=s,window.addEventListener("keydown",p)}const h={Backspace:8,Tab:9,Enter:13,Escape:27," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46},f=Object.assign({";":59,"=":61,"^":160,"!":161,"#":163,$:164,",":188,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},h);for(let t=0;t<10;++t)f[t]=48+t;for(let t=0;t<26;++t)f[String.fromCharCode(97+t)]=65+t;for(let t=1;t<=24;++t)f["F"+t]=111+t;function m(t){const e=["ctrl","alt","meta"];h.hasOwnProperty(t.key)&&e.push("shift");const i=n.SWAP_COMMAND_OPTION?{alt:"meta",meta:"alt",ctrl:"ctrl"}:{alt:"alt",meta:"meta",ctrl:"ctrl"};return e.reduce((e,n)=>t[`${n}Key`]?e.concat([i[n]]):e,[]).concat([t.key]).join("-")}const y=[];let w=null;function g(){y.length=0,w=null}const b=t=>{if(d)return;if(t.__keysnail__)return;if("Control"===t.key||"Alt"===t.key||"Meta"===t.key||"Shift"===t.key)return;let r=null;r=function(){let t=document.activeElement,e=t.tagName;return"TEXTAREA"===e||"INPUT"===e||t===o}()?document.activeElement===o?"rich":"edit":"view";const a=m(t);y.push(a),n.DEBUG_SHOW_INPUT_KEY&&e("Input: "+y.join(" -> "));let l=!1,c=i[r];let u=function(t,e){for(let n of e)if(n&&n.hasOwnProperty(t))return n[t];return null}(a,w?[w]:[c,i.all]);if(!u)return g();t.stopPropagation(),t.preventDefault(),u.command&&(l=!!u.marked,u=u.command),"object"==typeof u?w=u:(g(),"function"==typeof u?u():"string"==typeof u&&C.dispatchKey(u,l),l||(s=!1))};function x(t,e){let n=!1;t.addEventListener("compositionstart",()=>{n=!0},!1),t.addEventListener("compositionend",()=>{n=!1},!1),t.addEventListener("keydown",t=>{72===t.keyCode&&"Backspace"===t.key&&(n||(t.stopPropagation(),t.preventDefault(),e()))},!1)}function k(){return l||document.activeElement||document.documentElement}class v{constructor(){let t=document.createElement("div");t.setAttribute("id","keysnail-popup"),t.addEventListener("mousedown",t=>{"A"===t.target.tagName&&(this.action(this._filteredCandidates.indexOf(t.target)),t.preventDefault(),t.stopPropagation())},!0);let e=document.createElement("input");e.setAttribute("id","keysnail-popup-query"),e.addEventListener("input",t=>{this._filterCandidatesByQuery(e.value)},!1),e.addEventListener("keydown",t=>{this._handleKeyEvent(t)},!1),t.appendChild(e);let n=document.createElement("div");n.setAttribute("id","keysnail-popup-candidates"),t.appendChild(n),this.popup=t,this.queryInput=e,this.candidateList=n,this._hidden=!0,this._matchType="and",this._query="",this._index=0,document.documentElement.appendChild(t)}get _hidden(){return this.popup.classList.contains("hidden")}set _hidden(t){t?this.popup.classList.add("hidden"):this.popup.classList.remove("hidden")}set hintMode(t){t?this.popup.classList.add("hint-mode"):this.popup.classList.remove("hint-mode")}get hintMode(){return this.popup.classList.contains("hint-mode")}match(t,e){if("and"===this._matchType){let n=e.textContent.toLowerCase(),i=(e.href||"").toLowerCase();for(let e of t)if(n.indexOf(e)<0&&n.indexOf(i))return!1;return!0}}_handleKeyEvent(t){let e=m(t);"ArrowUp"===e?this.selectPrevious():"ArrowDown"===e?this.selectNext():"Enter"!==e&&"ctrl-m"!==e||this.action(this._index)}get allCandidates(){return Array.from(this.candidateList.childNodes)}action(t){let n=this._filteredCandidates[t];try{if(this._action){let t=this.allCandidates.indexOf(n);this._action(t,n)}else n.focus(),u(n),e("Visiting: "+n.textContent)}finally{this.exit()}}_filterCandidatesByQuery(t){this._filteredCandidates=[];const e=t.split(/[ \t]/);for(let t of this.candidateList.childNodes)this.match(e,t)?(t.classList.add("matched"),this._filteredCandidates.push(t)):t.classList.remove("matched");this._selectCandidateByIndex(0)}get running(){return!this._hidden}show(){this._hidden=!1}_setCandidates(t){this._clearCandidates(),t.forEach(t=>{this._addCandidate(t.text,t.url)})}_clearCandidates(){for(;this.candidateList.firstChild;)this.candidateList.firstChild.remove();this._filteredCandidates=[]}_addCandidate(t,e){let n=document.createElement("a");n.setAttribute("href",e),n.textContent=t,this.candidateList.appendChild(n)}_selectCandidateByIndex(t){this._filteredCandidates.forEach((e,n)=>{n===t?e.classList.add("selected"):e.classList.remove("selected")}),this._index=t}selectNext(){this._selectCandidateByIndex((this._index+1)%this._filteredCandidates.length)}selectPrevious(){this._index-1<0?this._selectCandidateByIndex(this._filteredCandidates.length-1):this._selectCandidateByIndex(this._index-1)}exit(){this.queryInput.blur(),this._hidden=!0,d&&d()}run(t,e){if(e=e||{},!this.running||(this.exit(),!e.toggle))if(this._action=e.action||null,this._setCandidates(t),this.hintMode=!!e.hints,this.show(),this.hintMode)p("#keysnail-popup a",()=>{this.exit()});else{this.queryInput.value=e.query||"",this._filterCandidatesByQuery(this.queryInput.value),e.initialIndex&&this._selectCandidateByIndex(e.initialIndex),this.queryInput.focus();const t=()=>{this.queryInput.removeEventListener("blur",t),this.exit()};this.queryInput.addEventListener("blur",t)}}}let _=null;var C={setMark:function(){e("Set mark."),s=!0},launchDebugConsole:()=>{!function(t,e,n,i,o,r,a,l,s,d,c){t.getElementById(o)||((c=(c=t[e+"NS"]&&t.documentElement.namespaceURI)?t[e+"NS"](c,"script"):t[e]("script"))[n]("id",o),c[n]("src",s+"firebug-lite.js#startOpened"),c[n](o,"4"),(t[i]("head")[0]||t[i]("body")[0]).appendChild(c),(c=new Image)[n]("src",s+"releases/lite/latest/skin/xp/sprite.png"))}(document,"createElement","setAttribute","getElementsByTagName","FirebugLite",0,0,0,"https://getfirebug.com/")},dispatchKey:(t,e,n)=>{let i=function(t){const e=new Map([["ALT","withAlt"],["SHIFT","withShift"],["COMMAND","withMeta"],["META","withMeta"],["CTRL","withCtrl"]]);return t.split("-").reduce((t,n)=>(e.has(n.toUpperCase())?t[e.get(n.toUpperCase())]=!0:t.key=n,t),{key:null,withCtrl:!1,withShift:!1,withAlt:!1,withMeta:!1})}(t);C.dispatchKeydown(i.key,i.withShift,i.withCtrl,i.withAlt,i.withMeta,e,n)},dispatchKeydown:function(t,i=!1,o=!1,r=!1,a=!1,l=!1,d=!1){const c={key:t,bubbles:!0,cancelable:!0,shiftKey:!(!l||!s)||i,ctrlKey:o,altKey:r,metaKey:a};f.hasOwnProperty(t)&&(c.keyCode=f[t]);let u=new KeyboardEvent("keydown",c);d||(u.__keysnail__=!0),u.__keepMark__=l,n.DEBUG_SHOW_DISPATCH_KEY&&e("Dispatch: "+m(u)),k().dispatchEvent(u)},get hitHintDisposer(){return d},doubleClick:function(){const t=new MouseEvent("dblclick",{bubbles:!0,cancelable:!0,view:window});k().dispatchEvent(t)},getSelectedText:function(){return r?r.getSelectedText():a?a.getSelection():document.activeElement.contentWindow?document.activeElement.contentWindow.getSelection()+"":window.getSelection()+""},insertText:function(t,e=!1){if(e&&(t=unescape(t)),r)r.insert(t);else if(a)a.replaceSelection(t);else if(document.activeElement.contentWindow){document.activeElement.contentWindow.document.execCommand("insertText",!1,t)}else document.execCommand("insertText",!1,t)},escape:function(){s?s=!1:(document.activeElement.blur(),document.documentElement.focus())},recenter:function(){if(r)r.centerSelection();else if(a){var t=a.cursorCoords(null,"local");a.scrollTo(null,(t.top+t.bottom)/2-a.getScrollInfo().clientHeight/2)}else if(document.querySelector(".cursor")){var e=$(".cursor"),n=e.offset()||{top:0,left:0},i=e.outerHeight();$(window).scrollTop(n.top-(window.innerHeight-i)/2)}},scrollDown:function(){window.scrollBy(0,150)},scrollUp:function(){window.scrollBy(0,-150)},scrollPageDown:function(){window.scrollBy(0,500)},scrollPageUp:function(){window.scrollBy(0,-500)},back:function(){history.back()},forward:function(){history.forward()},cursorBottom:function(){window.scrollTo(0,document.body.scrollHeight)},cursorTop:function(){window.scrollTo(0,0)},focusEditor:function(){l?l.focus():o?o.focus():C.focusFirstInput()},toggleHitHint:function(t){C.hitHintDisposer?C.hitHintDisposer():C.startHitHint(t)},startHitHint:function(t){return p(null,null,t)},focusFirstInput:function(){Array.from(document.querySelectorAll("input[type=text], input[type=search], input[type=password], textarea, textbox")).some(t=>{if(null!==t.offsetParent)return t.focus(),!0})},paste:()=>{$notify("paste")},killLine:()=>{C.dispatchKey("shift-End");let t=C.getSelectedText();C.dispatchKey("Backspace"),$notify("copyText",{text:t})},killRegion:()=>{const t=C.getSelectedText();C.dispatchKey("Backspace"),$notify("copyText",{text:t})},copyRegion:()=>{const t=C.getSelectedText();$notify("copyText",{text:t}),e("Copied!",1)},startSiteSelector:()=>{C.runPanel(n.sites.map(t=>({text:`📖  ${t.alias}`,url:t.url})),{toggle:!0})},runPanel:(t,e)=>{(_||(_=new v),_).run(t,e)},marked:t=>({command:t,marked:!0})};
/*@preserve SETTINGS_HERE*/setup(n,C,!0),function n(i){document.querySelector(".CodeMirror")?(t("Code mirror Initialized."),a=document.querySelector(".CodeMirror").CodeMirror,x(o=a.display.input.getField(),()=>C.dispatchKey("Backspace")),o.style.cursor="none"):"scrapbox.io"===location.host&&document.getElementById("text-input")?(t("Scrapbox Initialized."),function(){x(o=document.getElementById("text-input"),t=>C.dispatchKey("Backspace"));let t="";const n=new MutationObserver(e=>{for(const n of e)t!==location.href&&(t=location.href,$notify("urlDidChange",{url:location.href}))}),i=document.querySelector("head title");n.observe(i,{childList:!0}),window.alert=function(t){e(t)}}()):window._debug_editors&&document.querySelector(".file-tree ul.file-tree-list")&&document.querySelector(".ace_text-input")?(function(){r=window._debug_editors[window._debug_editors.length-1],x(o=document.querySelector(".ace_text-input"),()=>{C.dispatchKey("ctrl-Backspace")});let t=$(".file-tree .toolbar-right"),e=$(".file-tree ul.file-tree-list");t.append($('<a href=""><i class="fa fa-fw fa-arrow-up" /></a>').on("click",()=>e.scrollTop(e.scrollTop()-300))),t.append($('<a href=""><i class="fa fa-fw fa-arrow-down" /></a>').on("click",()=>e.scrollTop(e.scrollTop()+300)))}(),t("Overleaf initialized")):document.querySelector(".editor__inner")?o=document.querySelector(".editor__inner"):document.querySelector(".docs-texteventtarget-iframe")?(o=document.querySelector(".docs-texteventtarget-iframe"),(l=o.contentWindow.document.querySelector('[contenteditable="true"]')).addEventListener("keydown",t=>b(t),!0)):++i<10&&setTimeout(()=>{n(i)},500)}(0),window.addEventListener("keydown",e=>{try{b(e)}catch(e){t("Error in shortcutKeyHandler: "+e)}},!0),i={all:Object.assign({},n.globalKeyMap.all),view:Object.assign({},n.globalKeyMap.view),rich:Object.assign({},n.globalKeyMap.rich),edit:Object.assign({},n.globalKeyMap.edit)},c('\n#keysnail-popup * {\n   box-sizing: border-box;\n   font-family: "menlo" !important;\n   font-size: 15px !important;\n}\n#keysnail-popup {\n     display: block !important;\n     box-shadow: 0px 2px 5px rgba(0,0,0,0.8) !important;\n     position: fixed !important;\n     top: 5% !important;\n     left: 10% !important;\n     padding: 1em !important;\n     width: 80% !important;\n     height: 80% !important;\n     background: white !important;\n     opacity: 0.95 !important;\n     border: 1px solid rgba(0,0,0,0.5) !important;\n     border-radius: 1ex !important;\n     z-index: 2147482990 !important;\n     text-overflow: ellipsis !important;\n}\n#keysnail-popup.hidden {\n     display: none !important;\n}\n.hint-mode #keysnail-popup-query {\n  display: none !important;\n}\n#keysnail-popup-candidates {\n  overflow: hidden !important;\n  height: 100%;\n}\n#keysnail-popup-query {\n     width: 100%;\n     margin: 0 0 1em 0;\n     padding: 5px;\n     color: black;\n     border: 0px !important;\n     border-radius: 3px;\n     font-size: 16px;\n     outline: none !important;\n     background-color: rgba(0,0,0,0.05);\n }\n\n #keysnail-popup a {\n     display: none;\n     color: black !important;\n     padding: 0.5em 2em !important;\n     border-bottom: 1px solid rgba(0,0,0,0.3) !important;\n     text-overflow: ellipsis;\n     overflow: hidden;\n }\n\n#keysnail-popup a:after {\n     content: attr(href);\n     display: block;\n     font-size: 12px;\n     text-overflow: ellipsis;\n     overflow: hidden;\n     color: rgba(0,0,0,0.7);\n }\n\n #keysnail-popup a.matched {\n     display: block !important;\n }\n\n #keysnail-popup a.selected {\n     background-color: rgba(0,0,0,0.15);\n }\n.keysnail-hint {\n        background-color: yellow !important;\n        color: black !important;\n        font-family: "menlo" !important;\n        font-size: 15px !important;\n        padding: 2px !important;\n        position: fixed !important;\n        opacity: 0.8;\n        z-index: 2147483000;\n}\n');for(let{url:t,keymap:e,style:o}of n.sites)location.href.startsWith(t)&&(e&&(Object.assign(i.all,e.all||{}),Object.assign(i.view,e.view||{}),Object.assign(i.rich,e.rich||{}),Object.assign(i.edit,e.edit||{})),c(o));window.__keysnail__=C})()}});